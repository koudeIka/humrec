<?php
//======================================================================//
//== About html.class.php
//==--------------------------------------------------------------------//
//== This file is part of puppets library.
//== Copyright (c) 2009-2010 - Erwan LE LOSTEC
//== Licensed under the GPL version 2.0 license.
//== See LICENSE file or
//== http://www.gnu.org/licenses/old-licenses/gpl-2.0.html
//==--------------------------------------------------------------------//
//== Contributor : Erwan LE LOSTEC
//======================================================================//
class html
{/**
  * @class html
  * @brief HTML related manipulation class.
  * Provides different methods to output HTML.
  **/
	public $doctype;				/*!< doctype the website */
  	public $author;					/*!< define the author of the website */
	public $category;				/*!< define the category of the website */
	public $content_langage;		/*!< define the langage(s) to use */
	public $content_type;			/*!< define the charactter table to use */
	public $content_script_type;	/*!< allow the javascript event manager */
	public $copyright;				/*!< define the copyrght of the website */
	public $base;
	public $description; 			/*!< describe the website */
  	public $favicon;				/*!< define the favorite icon */
	public $generator;				/*!< define the program used to create of the website */
	public $googlebot;				/*!< allow/deny caching by google bots (archive|noarchive) */
	public $identifier_url;			/*!< define the domain of the page */
	public $keywords; 				/*!< principal keywords of the website per langage */
	public $publisher;				/*!< define the name of the publisher */
	public $robots;					/*!< allow/deny the indexation by bots (all|none|index|noindex|follow|nofollow) */
	public $title;					/*!< the title of the page */
	public $viewport;				/*!< precise the attribut of viewport (ex: width=200px) */

	public $css;					/*!< links to css files */
	public $scripts;				/*!< links to javascript files */
	public $script_header;			/*!< insert a javascript code in head */

	public $fix_ie6css;				/*!< links to internet explorer 6 css files */
	public $fix_ie6script;			/*!< links to internet explorer 6 javascript hack */
	public $fix_ie7css;				/*!< links to internet explorer 7 css files */
	public $fix_ie7script;			/*!< links to internet explorer 7 javascript hack */

  	public function __construct()
  	{/** @function __construct()
	 * Create a new html object.
	 *
	 * @return	nothing
	 **/
		$this->doctype					= null;
  		$this->author					= null;
		$this->category					= null;
		$this->content_langage 			= array("fr");
  		$this->content_type				= "utf-8";
  		$this->content_script_type		= null;
		$this->copyright				= null;
		$this->base						= null;
		$this->description				= null;
  		$this->favicon					= null;
  		$this->generator				= null;
  		$this->googlebot				= null;
		$this->identifier_url			= null;
		$this->keywords					= array();
		$this->publisher				= null;
		$this->robots					= null;
		$this->title					= null;
		$this->viewport					= null;
		$this->google_site_verification	= null;
		$this->css						= array();
		$this->scripts					= array();
		$this->script_header			= array();

		$this->fix_ie6css				= null;
		$this->fix_ie6script			= null;
		$this->fix_ie7css				= null;
		$this->fix_ie7script			= null;
   	}
   	public function header()
   	{/** @function header()
	 * Echo the begining of a html page.
	 *
	 * @return	nothing
	 **/
   		switch($this->doctype)
		{
			case "html5":	echo "<!DOCTYPE html>\n".
								 "<html lang='".implode(", ", $this->content_langage)."'>\n".
								 "  <head>\n".
								 "    <meta http-equiv='content-type' content='text/html; charset=".$this->content_type."' />\n";
							break;
							
			case "xhtml11":	echo  "<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.1//EN' 'http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd'>\n".
								  "<html xmlns='http://www.w3.org/1999/xhtml' xml:lang='".implode(", ", $this->content_langage)."'>\n".
							   	  " <head>\n".
								  "  <meta http-equiv='content-type' content='text/html; charset=".$this->content_type."' />\n";
							break;
							
			default:		echo "<?xml version='1.1' encoding='".$this->content_type."'?>\n".
								 "<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.1//EN' 'http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd'>\n".
								 "<html xmlns='http://www.w3.org/1999/xhtml'>\n".
								 " <head>\n".
								 "  <meta http-equiv='content-type' content='text/html; charset=".$this->content_type."' />\n".
								 "  <meta http-equiv='content-language' content='".implode(", ", $this->content_langage)."'/>\n";
							break;
		}

		if(!empty($this->base))						{ echo "  <base href='http://".$this->base."'/>\n"; 				};
		if(!empty($this->copyright))				{ echo "  <meta name='copyright' content='".$this->copyright."'/>\n"; 																};
		if(!empty($this->content_script_type))		{ echo "  <meta http-equiv='content-script-type' content='text/javascript' />\n"; 													};
		if(!empty($this->description))				{ echo "  <meta name='description' content='".htmlentities($this->description, ENT_QUOTES, $this->content_type)."'/>\n";			};
		if(!empty($this->generator))				{ echo "  <meta name='generator' content='".htmlentities($this->generator, ENT_QUOTES, $this->content_type)."'/>\n";				};
		if(!empty($this->identifier_url))			{ echo "  <meta name='identifier-url' content='".$this->identifier_url."'/>\n";														};
		if(count($this->keywords) > 0)				{ echo "  <meta name='keywords' content='".htmlentities(implode(", ", $this->keywords), ENT_QUOTES, $this->content_type)."'/>\n";	};
		if(!empty($this->publisher))				{ echo "  <meta name='publisher' content='".$this->publisher."'/>\n"; 																};
		if(!empty($this->robots))					{ echo "  <meta name='robots' content='".$this->robots."'/>\n"; 																	};
		if(!empty($this->googlebot))				{ echo "  <meta name='googlebot' content='".$this->googlebot."'/>\n";																};
		if(!empty($this->viewport))					{ echo "  <meta name='viewport' content='".$this->viewport."' />\n"; 																};
		if(!empty($this->google_site_verification))	{ echo "  <meta name='google-site-verification' content='".$this->google_site_verification."' />";									};
		if(!empty($this->favicon)) 					{ echo "  <link href='".$this->favicon."' type='image/png' rel='icon'/>\n"; 														};
		if(!empty($this->title))					{ echo "  <title>".$this->title."</title>\n"; 																						};


		for($c = 0; $c < count($this->css); $c++)		{ echo "  <link href='".$this->css[$c]."' rel='stylesheet' type='text/css' />\n";											};
		for($s = 0; $s < count($this->scripts); $s++)	{ echo "  <script type='text/javascript' src='".$this->scripts[$s]."'></script>\n";											};
		if(count($this->script_header) > 0) 			{ echo "  <script type='text/javascript'>\n//<![CDATA[\n".implode(";", $this->script_header)."\n// ]]>\n</script>\n"; 		};

		if(!empty($this->fix_ie6css))			{ echo "<!--[if IE 6]><link href='".$this->fix_ie6css."' rel='stylesheet' type='text/css' /><![endif]-->\n"; 						};
		if(!empty($this->fix_ie6script))		{ echo "<!--[if IE 6]><script type='text/javascript' src='".$this->fix_ie6script."'></script><![endif]-->\n"; 						};
		if(!empty($this->fix_ie7css))			{ echo "<!--[if IE 7]><link href='".$this->fix_ie7css."' rel='stylesheet' type='text/css' /><![endif]-->\n"; 						};
		if(!empty($this->fix_ie7script))		{ echo "<!--[if IE 7]><script type='text/javascript' src='".$this->fix_ie7script."'></script><![endif]-->\n"; 						};

		echo " </head>\n".
			 " <body>\n";
   	}
	public function footer()
	{/** @function footer()
	  * Echo the end of html file.
	  *
	  * @return	nothing
	  **/
	   echo "\n </body>\n".
			"</html>";
	}
	public static function clean($string)
	{/** @function clean()
	  * Strip all html tag in the $string
	  *
	  * @param	string	<string>	the string with html tags to remove
	  *
	  * @return	<string>
	  **/
		return strip_tags($string);
	}
}
?>